import{a as ze,b as me,d as Ke,e as W,f as Je,g as Ye,h as Ze,j as et,k as tt}from"./chunk-DE55SL3I.js";import{$ as L,Ab as Ne,Ac as Se,Ba as b,Bb as De,Bc as T,Cb as z,D as Ue,Db as Me,E as X,Eb as K,Fb as J,G as Q,Gc as He,Ia as s,Ic as Qe,Ja as c,Jc as We,Ka as u,Kc as Xe,La as V,M as E,N as w,Oa as Fe,Pc as it,Q as Be,Qc as rt,Rc as nt,S as Re,Sc as at,Ta as he,X as t,Xa as a,Y,Ya as l,Z as g,Za as R,_ as Z,aa as ee,ac as $e,ba as te,bc as ke,ca as ie,da as f,ec as ae,f as $,g as ge,ga as m,gc as B,ha as S,hc as le,ia as U,ib as P,ic as Oe,jb as j,jc as Ae,k,la as Ce,lb as q,mc as Le,nb as re,oc as Ve,pc as Pe,qa as n,qc as je,r as O,ra as r,rb as Te,rc as oe,s as Ee,sa as v,sc as se,tb as ne,tc as pe,ub as G,v as we,va as N,vb as F,wc as de,xa as h,xb as xe,xc as qe,ya as C,yb as be,yc as Ge,z as A,zb as H}from"./chunk-2VB7ZOXT.js";var y=class i extends ke{constructor(e,o,d,_){super(e,o,_);this.https=e;this.snak=o;this.router=d;this.injector_=_}_users$=new ge([]);get users$(){return this._users$.asObservable()}_roles$=new ge([]);get roles$(){return this._roles$.asObservable()}getUserFromServer(e=this.emptyPaginate,o=[]){let d=this.getHearder(),_=this.explosePaginationOption(e),x=Je(o);_+=x?`&${x}`:"",this.setLoadStatus(!0),this.http.get(`${H.apiUrlFirst}/admin/users/all?${_}`,d).pipe(k(I=>{this.setLoadStatus(!1),console.log(I),this._users$.next(I.data?.data??[]),this._paginateData$.next({current_page:I.data?.current_page??1,per_page:I.data?.per_page??1,total:I.data?.total??1})}),O(this.handleError)).subscribe()}createUser(e){let o=this.getHearder();this.setLoadStatus(!0),this.http.post(`${H.apiUrlFirst}/admin/users/create`,e,o).pipe(k(d=>{this.setLoadStatus(!1),console.log(d),d.success?(this.setSnackMesage(d.message,"btn-success"),this.setConfirmSubmit(!0)):this.setSnackMesage(`${d.error}`,"custom-error-snackbar")}),O(this.handleError)).subscribe()}updateUser(e,o){let d=this.getHearder();this.setLoadStatus(!0),this.http.put(`${H.apiUrlFirst}/admin/users/update/${o}`,e,d).pipe(k(_=>{this.setLoadStatus(!1),console.log(_),_.success?(this.setSnackMesage(_.message,"btn-success"),this.setConfirmSubmit(!0)):this.setSnackMesage(`${_.error}`,"custom-error-snackbar")}),O(this.handleError)).subscribe()}getUserDetail(e){let o=this.getHearder();return this.setLoadStatus(!0),this.http.get(`${H.apiUrlFirst}/admin/users/detail/${e}`,o).pipe(k(d=>(this.setLoadStatus(!1),console.log(d),d.data)),O(this.handleError))}getRolesFromServer(){let e=this.getHearder();this.setLoadStatus(!0),this.http.get(`${H.apiUrlFirst}/admin/roles/all`,e).pipe(k(o=>{this.setLoadStatus(!1),console.log(o),this._roles$.next(o.data??[])}),O(this.handleError)).subscribe()}static \u0275fac=function(o){return new(o||i)(Q(ne),Q($e),Q(F),Q(Be))};static \u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"})};function vt(i,p){i&1&&(n(0,"small"),s(1),a(2,"translate"),r()),i&2&&(t(),c(l(2,1,"FirstNameRequired")))}function ft(i,p){i&1&&(n(0,"small"),s(1),a(2,"translate"),r()),i&2&&(t(),c(l(2,1,"FirstNameMinLength")))}function _t(i,p){if(i&1&&(n(0,"div",29),f(1,vt,3,3,"small",30)(2,ft,3,3,"small",30),r()),i&2){let e=C();t(),m("ngIf",e.firstNameCtrl==null||e.firstNameCtrl.errors==null?null:e.firstNameCtrl.errors.required),t(),m("ngIf",e.firstNameCtrl==null||e.firstNameCtrl.errors==null?null:e.firstNameCtrl.errors.minlength)}}function gt(i,p){i&1&&(n(0,"small"),s(1),a(2,"translate"),r()),i&2&&(t(),c(l(2,1,"LastNameRequired")))}function Ct(i,p){i&1&&(n(0,"small"),s(1),a(2,"translate"),r()),i&2&&(t(),c(l(2,1,"LastNameMinLength")))}function ht(i,p){if(i&1&&(n(0,"div",29),f(1,gt,3,3,"small",30)(2,Ct,3,3,"small",30),r()),i&2){let e=C();t(),m("ngIf",e.lastNameCtrl==null||e.lastNameCtrl.errors==null?null:e.lastNameCtrl.errors.required),t(),m("ngIf",e.lastNameCtrl==null||e.lastNameCtrl.errors==null?null:e.lastNameCtrl.errors.minlength)}}function xt(i,p){i&1&&(n(0,"small"),s(1),a(2,"translate"),r()),i&2&&(t(),c(l(2,1,"EmailRequired")))}function bt(i,p){i&1&&(n(0,"small"),s(1),a(2,"translate"),r()),i&2&&(t(),c(l(2,1,"EmailInvalid")))}function St(i,p){if(i&1&&(n(0,"div",29),f(1,xt,3,3,"small",30)(2,bt,3,3,"small",30),r()),i&2){let e=C();t(),m("ngIf",e.emailCtrl==null||e.emailCtrl.errors==null?null:e.emailCtrl.errors.required),t(),m("ngIf",e.emailCtrl==null||e.emailCtrl.errors==null?null:e.emailCtrl.errors.email)}}function yt(i,p){i&1&&(n(0,"small"),s(1),a(2,"translate"),r()),i&2&&(t(),c(l(2,1,"PasswordRequired")))}function It(i,p){i&1&&(n(0,"small"),s(1),a(2,"translate"),r()),i&2&&(t(),c(l(2,1,"PasswordMinLength")))}function Et(i,p){if(i&1&&(n(0,"div",29),f(1,yt,3,3,"small",30)(2,It,3,3,"small",30),r()),i&2){let e=C(2);t(),m("ngIf",e.passwordCtrl==null||e.passwordCtrl.errors==null?null:e.passwordCtrl.errors.required),t(),m("ngIf",e.passwordCtrl==null||e.passwordCtrl.errors==null?null:e.passwordCtrl.errors.minlength)}}function wt(i,p){if(i&1&&(n(0,"div",7)(1,"label",8),s(2),a(3,"translate"),n(4,"span",9),s(5,"*"),r()(),v(6,"input",31),a(7,"translate"),f(8,Et,3,2,"div",11),r()),i&2){let e=C();t(2),u("",l(3,7,"Password")," "),t(4),S("is-invalid",(e.passwordCtrl==null?null:e.passwordCtrl.invalid)&&(e.passwordCtrl==null?null:e.passwordCtrl.touched))("is-valid",e.passwordCtrl==null?null:e.passwordCtrl.valid),b("placeholder",l(7,9,"EnterPassword")),t(2),m("ngIf",(e.passwordCtrl==null?null:e.passwordCtrl.invalid)&&(e.passwordCtrl==null?null:e.passwordCtrl.touched))}}function Ut(i,p){i&1&&(n(0,"small"),s(1),a(2,"translate"),r()),i&2&&(t(),c(l(2,1,"PasswordConfirmationRequired")))}function Bt(i,p){i&1&&(n(0,"small"),s(1),a(2,"translate"),r()),i&2&&(t(),c(l(2,1,"PasswordMismatch")))}function Rt(i,p){if(i&1&&(n(0,"div",29),f(1,Ut,3,3,"small",30)(2,Bt,3,3,"small",30),r()),i&2){let e=C(2);t(),m("ngIf",e.passwordConfirmationCtrl==null||e.passwordConfirmationCtrl.errors==null?null:e.passwordConfirmationCtrl.errors.required),t(),m("ngIf",e.userForm.errors==null?null:e.userForm.errors.passwordMismatch)}}function Ft(i,p){if(i&1&&(n(0,"div",7)(1,"label",8),s(2),a(3,"translate"),n(4,"span",9),s(5,"*"),r()(),v(6,"input",32),a(7,"translate"),f(8,Rt,3,2,"div",11),r()),i&2){let e=C();t(2),u("",l(3,7,"ConfirmPassword")," "),t(4),S("is-invalid",(e.passwordConfirmationCtrl==null?null:e.passwordConfirmationCtrl.invalid)&&(e.passwordConfirmationCtrl==null?null:e.passwordConfirmationCtrl.touched)||(e.userForm.errors==null?null:e.userForm.errors.passwordMismatch))("is-valid",(e.passwordConfirmationCtrl==null?null:e.passwordConfirmationCtrl.valid)&&!(e.userForm.errors!=null&&e.userForm.errors.passwordMismatch)),b("placeholder",l(7,9,"ConfirmPassword")),t(2),m("ngIf",(e.passwordConfirmationCtrl==null?null:e.passwordConfirmationCtrl.invalid)&&(e.passwordConfirmationCtrl==null?null:e.passwordConfirmationCtrl.touched)||(e.userForm.errors==null?null:e.userForm.errors.passwordMismatch))}}function Tt(i,p){i&1&&(n(0,"div",13)(1,"div",33),v(2,"i",34),s(3),a(4,"translate"),r()()),i&2&&(t(3),u(" ",l(4,1,"PasswordEditNote")," "))}function Nt(i,p){i&1&&(n(0,"small"),s(1),a(2,"translate"),r()),i&2&&(t(),c(l(2,1,"PasswordMinLength")))}function Dt(i,p){if(i&1&&(n(0,"div",29),f(1,Nt,3,3,"small",30),r()),i&2){let e=C(2);t(),m("ngIf",e.passwordCtrl==null||e.passwordCtrl.errors==null?null:e.passwordCtrl.errors.minlength)}}function Mt(i,p){if(i&1&&(n(0,"div",7)(1,"label",8),s(2),a(3,"translate"),n(4,"span",35),s(5),a(6,"translate"),r()(),v(7,"input",31),a(8,"translate"),f(9,Dt,2,1,"div",11),r()),i&2){let e=C();t(2),u("",l(3,8,"NewPassword")," "),t(3),u("(",l(6,10,"Optional"),")"),t(2),S("is-invalid",(e.passwordCtrl==null?null:e.passwordCtrl.invalid)&&(e.passwordCtrl==null?null:e.passwordCtrl.touched))("is-valid",e.passwordCtrl==null?null:e.passwordCtrl.valid),b("placeholder",l(8,12,"EnterNewPassword")),t(2),m("ngIf",(e.passwordCtrl==null?null:e.passwordCtrl.invalid)&&(e.passwordCtrl==null?null:e.passwordCtrl.touched))}}function $t(i,p){i&1&&(n(0,"small"),s(1),a(2,"translate"),r()),i&2&&(t(),c(l(2,1,"PasswordMismatch")))}function kt(i,p){if(i&1&&(n(0,"div",29),f(1,$t,3,3,"small",30),r()),i&2){let e=C(2);t(),m("ngIf",e.userForm.errors==null?null:e.userForm.errors.passwordMismatch)}}function Ot(i,p){if(i&1&&(n(0,"div",7)(1,"label",8),s(2),a(3,"translate"),n(4,"span",35),s(5),a(6,"translate"),r()(),v(7,"input",32),a(8,"translate"),f(9,kt,2,1,"div",11),r()),i&2){let e=C();t(2),u("",l(3,8,"ConfirmNewPassword")," "),t(3),u("(",l(6,10,"Optional"),")"),t(2),S("is-invalid",(e.passwordConfirmationCtrl==null?null:e.passwordConfirmationCtrl.invalid)&&(e.passwordConfirmationCtrl==null?null:e.passwordConfirmationCtrl.touched))("is-valid",e.passwordConfirmationCtrl==null?null:e.passwordConfirmationCtrl.valid),b("placeholder",l(8,12,"ConfirmNewPassword")),t(2),m("ngIf",(e.passwordConfirmationCtrl==null?null:e.passwordConfirmationCtrl.invalid)&&(e.passwordConfirmationCtrl==null?null:e.passwordConfirmationCtrl.touched))}}function At(i,p){i&1&&(n(0,"small"),s(1),a(2,"translate"),r()),i&2&&(t(),c(l(2,1,"UserTypeRequired")))}function Lt(i,p){if(i&1&&(n(0,"div",29),f(1,At,3,3,"small",30),r()),i&2){let e=C();t(),m("ngIf",e.isAdminCtrl==null||e.isAdminCtrl.errors==null?null:e.isAdminCtrl.errors.required)}}function Vt(i,p){if(i&1&&(n(0,"ng-option",36)(1,"div",37),v(2,"i",38),n(3,"div")(4,"div",39),s(5),r(),n(6,"small",35),s(7),r()()()()),i&2){let e=p.$implicit;m("value",e.id),t(5),c(e.name),t(2),c(e.guard_name)}}function Pt(i,p){i&1&&(n(0,"small"),s(1),a(2,"translate"),r()),i&2&&(t(),c(l(2,1,"RoleRequired")))}function jt(i,p){if(i&1&&(n(0,"div",29),f(1,Pt,3,3,"small",30),r()),i&2){let e=C();t(),m("ngIf",e.roleCtrl==null||e.roleCtrl.errors==null?null:e.roleCtrl.errors.required)}}function qt(i,p){if(i&1&&(n(0,"div",40),v(1,"i",41),s(2),r()),i&2){let e=C();t(2),u(" ",e.message," ")}}function Gt(i,p){i&1&&f(0,qt,3,1,"div",40),i&2&&Ce(p.status?0:-1)}function Ht(i,p){i&1&&v(0,"span",42)}function zt(i,p){i&1&&v(0,"i",43)}var M=class i{constructor(p,e,o,d,_,x){this.languageService=p;this.activeModal=e;this.formBuilder=o;this.userService=d;this.route=_;this.router=x}reload=new Re;userToEdit;userId;loading$;userForm;roles$;btnSubmit=!1;error$;confirmSubmit$;isEditMode=!1;ngOnInit(){this.userId=this.route.snapshot.paramMap.get("id")||this.userToEdit?.id,this.isEditMode=!!this.userId||!!this.userToEdit,this.loading$=this.userService.loading$,this.userService.setLoadStatus(!1),this.roles$=this.userService.roles$,this.confirmSubmit$=this.userService.confirmSubmit$,this.error$=this.userService.error$,this.initForm(),this.loadData(),this.userToEdit&&this.populateForm(this.userToEdit),this.confirmSubmit$.subscribe(p=>{p&&(this.activeModal?this.activeModal.close():this.router.navigate(["/admin/users"]),this.reload.emit(!0))})}initForm(){let p=this.isEditMode?[]:[B.required],e=this.isEditMode?[]:[B.required];this.userForm=this.formBuilder.group({first_name:["",[B.required]],last_name:["",[B.required]],email:["",[B.required,B.email]],password:[null,p],password_confirmation:[null,e],is_admin:[0,[B.required]],role_id:[null,[B.required]]},{validators:this.isEditMode?null:this.passwordMatchValidator})}loadData(){this.userService.getRolesFromServer()}populateForm(p){this.userForm.patchValue({first_name:p.first_name,last_name:p.last_name,email:p.email,is_admin:p.is_admin,role_id:p.roles&&p.roles.length>0?p.roles[0].id:""})}passwordMatchValidator(p){let e=p.get("password"),o=p.get("password_confirmation");return e&&o&&e.value!==o.value?{passwordMismatch:!0}:null}onSubmit(){this.userForm.valid?(this.btnSubmit=!0,this.isEditMode&&(this.userId||this.userToEdit?.id)?this.userService.updateUser(this.userForm.value,this.userId||this.userToEdit.id):this.userService.createUser(this.userForm.value)):this.markFormGroupTouched(this.userForm)}markFormGroupTouched(p){Object.keys(p.controls).forEach(e=>{let o=p.get(e);o?.markAsTouched(),o instanceof Ae&&this.markFormGroupTouched(o)})}closeModal(){this.activeModal?this.activeModal.dismiss():this.router.navigate(["/admin/users"])}get firstNameCtrl(){return this.userForm.get("first_name")}get lastNameCtrl(){return this.userForm.get("last_name")}get emailCtrl(){return this.userForm.get("email")}get passwordCtrl(){return this.userForm.get("password")}get passwordConfirmationCtrl(){return this.userForm.get("password_confirmation")}get isAdminCtrl(){return this.userForm.get("is_admin")}get roleCtrl(){return this.userForm.get("role_id")}static \u0275fac=function(e){return new(e||i)(g(K),g(ze,8),g(de),g(y),g(G),g(F))};static \u0275cmp=L({type:i,selectors:[["app-create-user"]],inputs:{userToEdit:"userToEdit"},outputs:{reload:"reload"},standalone:!1,decls:88,vars:101,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-md-6","mb-3"],[1,"form-label"],[1,"text-danger"],["type","text","formControlName","first_name",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","last_name",1,"form-control",3,"placeholder"],[1,"col-12","mb-3"],["type","email","formControlName","email",1,"form-control",3,"placeholder"],["class","col-md-6 mb-3",4,"ngIf"],["class","col-12 mb-3",4,"ngIf"],["formControlName","is_admin",1,"form-select"],["value",""],["value","1"],["value","0"],["bindLabel","name","bindValue","id","formControlName","role_id",3,"items","closeOnSelect","searchable","clearable","placeholder"],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-times","me-2"],["type","submit",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm me-2","role","status",4,"ngIf"],["class","fas fa-save me-2",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],["type","password","formControlName","password",1,"form-control",3,"placeholder"],["type","password","formControlName","password_confirmation",1,"form-control",3,"placeholder"],["role","alert",1,"alert","alert-info"],[1,"fas","fa-info-circle","me-2"],[1,"text-muted"],[3,"value"],[1,"d-flex","align-items-center"],[1,"fas","fa-user-tag","text-primary","me-2"],[1,"fw-bold"],["role","alert",1,"alert","alert-danger"],[1,"fas","fa-exclamation-triangle","me-2"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],[1,"fas","fa-save","me-2"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"h4",1),s(2),a(3,"translate"),a(4,"translate"),r(),n(5,"button",2),h("click",function(){return o.closeModal()}),n(6,"span",3),s(7,"\xD7"),r()()(),n(8,"div",4)(9,"form",5),h("ngSubmit",function(){return o.onSubmit()}),n(10,"div",6)(11,"div",7)(12,"label",8),s(13),a(14,"translate"),n(15,"span",9),s(16,"*"),r()(),v(17,"input",10),a(18,"translate"),f(19,_t,3,2,"div",11),r(),n(20,"div",7)(21,"label",8),s(22),a(23,"translate"),n(24,"span",9),s(25,"*"),r()(),v(26,"input",12),a(27,"translate"),f(28,ht,3,2,"div",11),r(),n(29,"div",13)(30,"label",8),s(31),a(32,"translate"),n(33,"span",9),s(34,"*"),r()(),v(35,"input",14),a(36,"translate"),f(37,St,3,2,"div",11),r(),f(38,wt,9,11,"div",15)(39,Ft,9,11,"div",15)(40,Tt,5,3,"div",16)(41,Mt,10,14,"div",15)(42,Ot,10,14,"div",15),n(43,"div",7)(44,"label",8),s(45),a(46,"translate"),n(47,"span",9),s(48,"*"),r()(),n(49,"select",17)(50,"option",18),s(51),a(52,"translate"),r(),n(53,"option",19),s(54),a(55,"translate"),r(),n(56,"option",20),s(57),a(58,"translate"),r()(),f(59,Lt,2,1,"div",11),r(),n(60,"div",7)(61,"label",8),s(62),a(63,"translate"),n(64,"span",9),s(65,"*"),r()(),n(66,"ng-select",21),a(67,"translate"),a(68,"async"),f(69,Vt,8,3,"ng-option",22),a(70,"async"),r(),f(71,jt,2,1,"div",11),r()(),f(72,Gt,1,1),a(73,"async"),r()(),n(74,"div",23)(75,"button",24),h("click",function(){return o.closeModal()}),v(76,"i",25),s(77),a(78,"translate"),r(),n(79,"button",26),a(80,"async"),h("click",function(){return o.onSubmit()}),f(81,Ht,1,0,"span",27),a(82,"async"),f(83,zt,1,0,"i",28),a(84,"async"),s(85),a(86,"translate"),a(87,"translate"),r()()),e&2){let d;t(2),c(o.isEditMode?l(3,55,"UpdateUser"):l(4,57,"CreateUser")),t(7),m("formGroup",o.userForm),t(4),u("",l(14,59,"FirstName")," "),t(4),S("is-invalid",(o.firstNameCtrl==null?null:o.firstNameCtrl.invalid)&&(o.firstNameCtrl==null?null:o.firstNameCtrl.touched))("is-valid",o.firstNameCtrl==null?null:o.firstNameCtrl.valid),b("placeholder",l(18,61,"EnterFirstName")),t(2),m("ngIf",(o.firstNameCtrl==null?null:o.firstNameCtrl.invalid)&&(o.firstNameCtrl==null?null:o.firstNameCtrl.touched)),t(3),u("",l(23,63,"LastName")," "),t(4),S("is-invalid",(o.lastNameCtrl==null?null:o.lastNameCtrl.invalid)&&(o.lastNameCtrl==null?null:o.lastNameCtrl.touched))("is-valid",o.lastNameCtrl==null?null:o.lastNameCtrl.valid),b("placeholder",l(27,65,"EnterLastName")),t(2),m("ngIf",(o.lastNameCtrl==null?null:o.lastNameCtrl.invalid)&&(o.lastNameCtrl==null?null:o.lastNameCtrl.touched)),t(3),u("",l(32,67,"Email")," "),t(4),S("is-invalid",(o.emailCtrl==null?null:o.emailCtrl.invalid)&&(o.emailCtrl==null?null:o.emailCtrl.touched))("is-valid",o.emailCtrl==null?null:o.emailCtrl.valid),b("placeholder",l(36,69,"EnterEmail")),t(2),m("ngIf",(o.emailCtrl==null?null:o.emailCtrl.invalid)&&(o.emailCtrl==null?null:o.emailCtrl.touched)),t(),m("ngIf",!o.isEditMode),t(),m("ngIf",!o.isEditMode),t(),m("ngIf",o.isEditMode),t(),m("ngIf",o.isEditMode),t(),m("ngIf",o.isEditMode),t(3),u("",l(46,71,"UserType")," "),t(4),S("is-invalid",(o.isAdminCtrl==null?null:o.isAdminCtrl.invalid)&&(o.isAdminCtrl==null?null:o.isAdminCtrl.touched))("is-valid",o.isAdminCtrl==null?null:o.isAdminCtrl.valid),t(2),c(l(52,73,"SelectUserType")),t(3),c(l(55,75,"Administrator")),t(3),c(l(58,77,"RegularUser")),t(2),m("ngIf",(o.isAdminCtrl==null?null:o.isAdminCtrl.invalid)&&(o.isAdminCtrl==null?null:o.isAdminCtrl.touched)),t(3),u("",l(63,79,"Role")," "),t(4),S("is-invalid",(o.roleCtrl==null?null:o.roleCtrl.invalid)&&(o.roleCtrl==null?null:o.roleCtrl.touched))("is-valid",o.roleCtrl==null?null:o.roleCtrl.valid),b("placeholder",l(67,81,"SelectRole")),m("items",l(68,83,o.roles$))("closeOnSelect",!0)("searchable",!0)("clearable",!0),t(3),m("ngForOf",l(70,85,o.roles$)),t(2),m("ngIf",(o.roleCtrl==null?null:o.roleCtrl.invalid)&&(o.roleCtrl==null?null:o.roleCtrl.touched)),t(),Ce((d=l(73,87,o.error$))?72:-1,d),t(5),u(" ",l(78,89,"Cancel")," "),t(2),m("disabled",l(80,91,o.loading$)||o.userForm.invalid),t(2),m("ngIf",l(82,93,o.loading$)),t(2),m("ngIf",!l(84,95,o.loading$)),t(2),u(" ",o.userId?l(86,97,"UpdateUser"):l(87,99,"CreateUser")," ")}},dependencies:[P,j,Le,se,pe,ae,oe,le,Oe,Pe,je,We,Qe,q,z],encapsulation:2})};var ce=class i{constructor(p,e,o){this.templateRef=p;this.viewContainer=e;this.roleService=o}destroy$=new $;requiredRole=null;set hasRole(p){this.requiredRole=p,this.updateView()}ngOnInit(){this.roleService.currentUserRoles$.pipe(A(this.destroy$)).subscribe(()=>{this.updateView()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}updateView(){this.viewContainer.clear(),this.requiredRole&&this.roleService.hasRole(this.requiredRole)&&this.viewContainer.createEmbeddedView(this.templateRef)}static \u0275fac=function(e){return new(e||i)(g(Y),g(Z),g(J))};static \u0275dir=te({type:i,selectors:[["","hasRole",""]],inputs:{hasRole:"hasRole"}})};var ue=class i{constructor(p,e,o){this.templateRef=p;this.viewContainer=e;this.roleService=o}destroy$=new $;forbiddenRole=null;set cannotAccess(p){this.forbiddenRole=p,this.updateView()}ngOnInit(){this.roleService.currentUserRoles$.pipe(A(this.destroy$)).subscribe(()=>{this.updateView()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}updateView(){this.viewContainer.clear(),this.forbiddenRole&&!this.roleService.hasRole(this.forbiddenRole)&&this.viewContainer.createEmbeddedView(this.templateRef)}static \u0275fac=function(e){return new(e||i)(g(Y),g(Z),g(J))};static \u0275dir=te({type:i,selectors:[["","cannotAccess",""]],inputs:{cannotAccess:"cannotAccess"}})};var Wt=()=>[],Xt=()=>[5,10,25,50];function Yt(i,p){if(i&1){let e=N();n(0,"button",46),h("click",function(){E(e);let d=C();return w(d.openCreateModal())}),v(1,"i",47),s(2),a(3,"translate"),r()}i&2&&(t(2),u(" ",l(3,1,"CreateUser")," "))}function Zt(i,p){i&1&&(n(0,"div",48)(1,"small"),v(2,"i",49),s(3),a(4,"translate"),r()()),i&2&&(t(3),u(" ",l(4,1,"SuperAdminOnlyMessage")," "))}function ei(i,p){if(i&1&&(n(0,"option",50),s(1),r()),i&2){let e=p.$implicit;m("value",e.id),t(),u(" ",e.name," ")}}function ti(i,p){i&1&&(n(0,"tr")(1,"td",51)(2,"div",52)(3,"span",53),s(4),a(5,"translate"),r()(),n(6,"span",54),s(7),a(8,"translate"),r()()()),i&2&&(t(4),u("",l(5,2,"Loading"),"..."),t(3),u("",l(8,4,"Loading"),"..."))}function ii(i,p){i&1&&(n(0,"tr")(1,"td",51),v(2,"i",55),n(3,"p",56),s(4),a(5,"translate"),r()()()),i&2&&(t(4),c(l(5,1,"NoUsersFound")))}function ri(i,p){i&1&&(n(0,"div",71),v(1,"i",72),s(2),a(3,"translate"),r()),i&2&&(t(2),u(" ",l(3,1,"Verified")," "))}function ni(i,p){i&1&&(n(0,"div",73),v(1,"i",74),s(2),a(3,"translate"),r()),i&2&&(t(2),u(" ",l(3,1,"NotVerified")," "))}function ai(i,p){if(i&1&&(n(0,"span",75),s(1),r()),i&2){let e=p.$implicit;t(),u(" ",e.name," ")}}function li(i,p){i&1&&(n(0,"span",76),s(1),a(2,"translate"),r()),i&2&&(t(),u(" ",l(2,1,"NoRoles")," "))}function oi(i,p){if(i&1){let e=N();n(0,"tr",57),h("click",function(){let d=E(e).$implicit,_=C();return w(_.goToDetail(d))}),n(1,"td",58)(2,"div",4)(3,"div",59),v(4,"i",60),r(),n(5,"div")(6,"span",61),s(7),r()()()(),n(8,"td",58)(9,"span",62),s(10),r(),f(11,ri,4,3,"div",63)(12,ni,4,3,"div",64),r(),n(13,"td",58)(14,"div",65),f(15,ai,2,1,"span",66)(16,li,3,3,"span",67),r()(),n(17,"td",58)(18,"span"),s(19),a(20,"translate"),a(21,"translate"),r()(),n(22,"td",58)(23,"span",61),s(24),a(25,"date"),r()(),n(26,"td",58)(27,"div",4)(28,"button",68),a(29,"translate"),h("click",function(d){let _=E(e).$implicit;return C().goToDetail(_),w(d.stopPropagation())}),v(30,"i",69),r(),n(31,"button",68),a(32,"translate"),h("click",function(d){let _=E(e).$implicit;return C().goToEdit(_),w(d.stopPropagation())}),v(33,"i",70),r()()()()}if(i&2){let e=p.$implicit;t(7),V(" ",e.first_name," ",e.last_name," "),t(3),c(e.email),t(),m("ngIf",e.email_verified_at),t(),m("ngIf",!e.email_verified_at),t(3),m("ngForOf",e.roles),t(),m("ngIf",(e.roles==null?null:e.roles.length)===0),t(2),U(e.is_admin?"badge badge-sm bg-gradient-success":"badge badge-sm bg-gradient-info"),t(),u(" ",e.is_admin?l(20,13,"Admin"):l(21,15,"User")," "),t(5),u(" ",R(25,17,e.created_at,"short")," "),t(4),b("title",l(29,20,"ViewDetails")),t(3),b("title",l(32,22,"Edit"))}}function si(i,p){if(i&1){let e=N();n(0,"div",77)(1,"div",78)(2,"div",79)(3,"div",4)(4,"span",80),s(5),a(6,"translate"),a(7,"async"),a(8,"translate"),a(9,"async"),a(10,"translate"),a(11,"async"),a(12,"translate"),r()()(),n(13,"div",79)(14,"mat-paginator",81,0),h("page",function(d){E(e);let _=C();return w(_.pageEvent=_.pageChange(d))}),r()()()()}if(i&2){let e,o=C();t(5),Fe(" ",l(6,11,"Showing")," ",((e=l(7,13,o.paginateData$))==null?null:e.current_page)||0," ",l(8,15,"to")," ",((e=l(9,17,o.paginateData$))==null?null:e.per_page)||0," ",l(10,19,"of")," ",((e=l(11,21,o.paginateData$))==null?null:e.total)||0," ",l(12,23,"entries")," "),t(9),m("length",o.totaElement)("pageSize",o.itemsPerPage)("pageSizeOptions",he(25,Xt))("showFirstLastButtons",!0)}}var ve=class i extends T{constructor(e,o,d,_,x,I,gi,Ci){super();this.languageService=e;this.userService=o;this.modalService=d;this.router=_;this.route=x;this.formBuilder=I;this.roleService=gi;this.exportService=Ci}loading$;itemsPerPage=10;paginateData$;paginateData;totaElement=0;pageEvent;searchCtrl;roleCtrl;statusCtrl;users$;roles$;currentSortBy="created_at";sortDirection="desc";userRole=be;ngOnInit(){this.loading$=this.userService.loading$,this.users$=this.userService.users$,this.roles$=this.userService.roles$,this.paginateData$=this.userService.paginateData$,this.initFormControls(),this.setupFilterSubscriptions(),this.loadInitialData()}initFormControls(){this.searchCtrl=this.formBuilder.control(""),this.roleCtrl=this.formBuilder.control(""),this.statusCtrl=this.formBuilder.control("")}setupFilterSubscriptions(){this.searchCtrl.valueChanges.pipe(Ee(300),we()).subscribe(()=>{this.applyFilters()}),this.roleCtrl.valueChanges.subscribe(()=>{this.applyFilters()}),this.statusCtrl.valueChanges.subscribe(()=>{this.applyFilters()}),this.paginateData$.subscribe(e=>{this.paginateData=e,this.totaElement=e.total??0})}loadInitialData(){this.userService.getUserFromServer(),this.applyFilters()}getSearchOptions(){let e=[];return this.searchCtrl.value&&e.push(Ke(this.searchCtrl.value)),this.roleCtrl.value&&e.push(W("role_id",this.roleCtrl.value)),this.statusCtrl.value!==""&&e.push(W("is_admin",this.statusCtrl.value)),e.push(W("sort_by",this.currentSortBy)),e.push(W("sort_direction",this.sortDirection)),e}applyFilters(){this.paginateData.current_page=1,this.userService.getUserFromServer(this.paginateData,this.getSearchOptions())}pageChange(e){return this.paginateData.current_page=e.pageIndex+1,this.paginateData.per_page=e.pageSize,this.userService.getUserFromServer(this.paginateData,this.getSearchOptions()),e}sortBy(e){this.currentSortBy===e?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.currentSortBy=e,this.sortDirection="desc"),this.applyFilters()}getSortIcon(e){return this.currentSortBy!==e?"fas fa-sort text-secondary":this.sortDirection==="asc"?"fas fa-sort-up text-primary":"fas fa-sort-down text-primary"}trackByUserId(e,o){return o.id}openCreateModal(){this.modalService.open(M,{size:"lg",backdrop:"static",keyboard:!1}).result.then(()=>{this.applyFilters()}).catch(()=>{})}openEditModal(e){let o=this.modalService.open(M,{size:"lg",backdrop:"static",keyboard:!1});o.componentInstance.userToEdit=e,o.result.then(()=>{this.applyFilters()}).catch(()=>{})}goToDetail(e){this.router.navigate(["/admin/users/detail",e.id])}goToEdit(e){this.openEditModal(e)}resetFilters(){this.searchCtrl.setValue(""),this.roleCtrl.setValue(""),this.statusCtrl.setValue(""),this.applyFilters()}exportColumns=[{key:"first_name",label:"Pr\xE9nom",translateKey:"export.firstName"},{key:"last_name",label:"Nom",translateKey:"export.lastName"},{key:"email",label:"Email",translateKey:"export.email"},{key:"roles.0.name",label:"R\xF4le",translateKey:"export.role"},{key:"email_verified_at",label:"V\xE9rifi\xE9",translateKey:"export.verified"},{key:"created_at",label:"Date de Cr\xE9ation",translateKey:"export.createdAt"}];onBeforeExport(e){console.log(`D\xE9but de l'export ${e.format} avec ${e.data.length} \xE9l\xE9ments`),console.log("Donn\xE9es \xE0 exporter:",e.data),console.log("Colonnes d'export:",this.exportColumns),e.data.length>0&&(console.log("Test premi\xE8re ligne:"),this.exportColumns.forEach(o=>{let d=this.getTestValue(e.data[0],o.key);console.log(`${o.key} -> ${d}`)}))}getTestValue(e,o){return o.split(".").reduce((d,_)=>d&&d[_]!==void 0?d[_]:null,e)}onAfterExport(e){e.success?console.log(`Export ${e.format} r\xE9ussi`):console.error(`Erreur lors de l'export ${e.format}`)}static \u0275fac=function(o){return new(o||i)(g(K),g(y),g(me),g(F),g(G),g(de),g(J),g(Ye))};static \u0275cmp=L({type:i,selectors:[["app-list-user"]],standalone:!1,features:[ie],decls:124,vars:108,consts:[["paginator",""],["nameOption","Users"],[1,"row","mb-4"],[1,"col-lg-8","col-md-6","col-12"],[1,"d-flex","align-items-center"],[1,"mb-0","text-dark"],[1,"badge","bg-gradient-info","ms-2"],[1,"text-sm","text-secondary","mb-0"],[1,"col-lg-4","col-md-6","col-12","text-end"],[1,"me-2",3,"beforeExport","afterExport","data","columns","filename","title","disabled"],["class","btn btn-primary btn-sm mb-0",3,"click",4,"hasRole"],["class","alert alert-info py-2 px-3 mb-0",4,"cannotAccess"],[1,"col-12"],[1,"card"],[1,"card-body","p-3"],[1,"row","align-items-center"],[1,"col-lg-4","col-md-6","col-12"],[1,"form-group","mb-0"],[1,"form-label","text-xs"],[1,"input-group"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text",1,"form-control",3,"placeholder","formControl"],[1,"col-lg-3","col-md-6","col-12"],[1,"form-select",3,"formControl"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","1"],["value","0"],[1,"col-lg-2","col-md-6","col-12"],[1,"btn","btn-outline-secondary","w-100",3,"click"],[1,"fas","fa-sync-alt","me-2"],[1,"row"],[1,"card-header","pb-0"],[1,"d-lg-flex"],[1,"mb-0"],[1,"text-sm","mb-0"],[1,"card-body","px-0","pb-0"],[1,"table-responsive"],["id","users-list",1,"table","table-flush"],[1,"thead-light"],[1,"text-uppercase","text-secondary","text-xxs","font-weight-bolder","opacity-7"],[1,"btn","btn-sm","p-0","text-secondary",3,"click"],[4,"ngIf"],["class","cursor-pointer hover-shadow",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["class","card-footer",4,"ngIf"],[1,"btn","btn-primary","btn-sm","mb-0",3,"click"],[1,"fas","fa-plus","me-2"],[1,"alert","alert-info","py-2","px-3","mb-0"],[1,"fas","fa-info-circle","me-1"],[3,"value"],["colspan","6",1,"text-center","py-4"],["role","status",1,"spinner-border","spinner-border-sm","text-primary"],[1,"visually-hidden"],[1,"ms-2"],[1,"fas","fa-users","fa-3x","text-secondary","mb-3"],[1,"text-secondary","mb-0"],[1,"cursor-pointer","hover-shadow",3,"click"],[1,"text-sm"],[1,"avatar","avatar-sm","bg-gradient-primary","rounded-circle","me-3"],[1,"fas","fa-user","text-white"],[1,"text-dark","font-weight-bold"],[1,"text-dark"],["class","text-xs text-success",4,"ngIf"],["class","text-xs text-warning",4,"ngIf"],[1,"d-flex","flex-wrap"],["class","badge bg-gradient-info me-1 mb-1",4,"ngFor","ngForOf"],["class","text-muted",4,"ngIf"],[1,"btn","btn-link","text-secondary","ps-1","pe-1","mb-0",3,"click","title"],[1,"fas","fa-eye","text-xs"],[1,"fas","fa-edit","text-xs"],[1,"text-xs","text-success"],[1,"fas","fa-check-circle","me-1"],[1,"text-xs","text-warning"],[1,"fas","fa-exclamation-circle","me-1"],[1,"badge","bg-gradient-info","me-1","mb-1"],[1,"text-muted"],[1,"card-footer"],[1,"row","mt-3"],[1,"col-sm-6"],[1,"text-sm","text-secondary"],["aria-label","Select page",3,"page","length","pageSize","pageSizeOptions","showFirstLastButtons"]],template:function(o,d){if(o&1&&(n(0,"app-base",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h4",5),s(5),a(6,"translate"),r(),n(7,"span",6),s(8),a(9,"async"),a(10,"translate"),r()(),n(11,"p",7),s(12),a(13,"translate"),r()(),n(14,"div",8)(15,"app-export-buttons",9),a(16,"async"),a(17,"async"),h("beforeExport",function(x){return d.onBeforeExport(x)})("afterExport",function(x){return d.onAfterExport(x)}),r(),f(18,Yt,4,3,"button",10)(19,Zt,5,3,"div",11),r()(),n(20,"div",2)(21,"div",12)(22,"div",13)(23,"div",14)(24,"div",15)(25,"div",16)(26,"div",17)(27,"label",18),s(28),a(29,"translate"),r(),n(30,"div",19)(31,"span",20),v(32,"i",21),r(),v(33,"input",22),a(34,"translate"),r()()(),n(35,"div",23)(36,"div",17)(37,"label",18),s(38),a(39,"translate"),r(),n(40,"select",24)(41,"option",25),s(42),a(43,"translate"),r(),f(44,ei,2,2,"option",26),a(45,"async"),r()()(),n(46,"div",23)(47,"div",17)(48,"label",18),s(49),a(50,"translate"),r(),n(51,"select",24)(52,"option",25),s(53),a(54,"translate"),r(),n(55,"option",27),s(56),a(57,"translate"),r(),n(58,"option",28),s(59),a(60,"translate"),r()()()(),n(61,"div",29)(62,"div",17)(63,"label",18),s(64,"\xA0"),r(),n(65,"button",30),h("click",function(){return d.resetFilters()}),v(66,"i",31),s(67),a(68,"translate"),r()()()()()()()(),n(69,"div",32)(70,"div",12)(71,"div",13)(72,"div",33)(73,"div",34)(74,"div")(75,"h5",35),s(76),a(77,"translate"),r(),n(78,"p",36),s(79),a(80,"translate"),r()()()(),n(81,"div",37)(82,"div",38)(83,"table",39)(84,"thead",40)(85,"tr")(86,"th",41)(87,"button",42),h("click",function(){return d.sortBy("first_name")}),s(88),a(89,"translate"),v(90,"i"),r()(),n(91,"th",41)(92,"button",42),h("click",function(){return d.sortBy("email")}),s(93),a(94,"translate"),v(95,"i"),r()(),n(96,"th",41),s(97),a(98,"translate"),r(),n(99,"th",41)(100,"button",42),h("click",function(){return d.sortBy("is_admin")}),s(101),a(102,"translate"),v(103,"i"),r()(),n(104,"th",41)(105,"button",42),h("click",function(){return d.sortBy("created_at")}),s(106),a(107,"translate"),v(108,"i"),r()(),n(109,"th",41),s(110),a(111,"translate"),r()()(),n(112,"tbody"),f(113,ti,9,6,"tr",43),a(114,"async"),f(115,ii,6,3,"tr",43),a(116,"async"),a(117,"async"),f(118,oi,34,24,"tr",44),a(119,"async"),r()()()(),f(120,si,16,26,"div",45),a(121,"async"),a(122,"async"),a(123,"async"),r()()()()),o&2){let _,x,I;t(5),c(l(6,45,"Users")),t(3),V("",((_=l(9,47,d.users$))==null?null:_.length)||0," ",l(10,49,"items"),""),t(4),c(l(13,51,"ManageSystemUsers")),t(3),m("data",l(16,53,d.users$)||he(107,Wt))("columns",d.exportColumns)("filename",d.languageService.instant("export.filename.users"))("title",d.languageService.instant("export.title.users"))("disabled",((x=l(17,55,d.users$))==null?null:x.length)===0),t(3),m("hasRole",d.userRole.SUPER_ADMIN),t(),m("cannotAccess",d.userRole.SUPER_ADMIN),t(9),c(l(29,57,"Search")),t(5),b("placeholder",l(34,59,"SearchByNameOrEmail")),m("formControl",d.searchCtrl),t(5),c(l(39,61,"Role")),t(2),m("formControl",d.roleCtrl),t(2),c(l(43,63,"All")),t(2),m("ngForOf",l(45,65,d.roles$)),t(5),c(l(50,67,"Status")),t(2),m("formControl",d.statusCtrl),t(2),c(l(54,69,"All")),t(3),c(l(57,71,"Admin")),t(3),c(l(60,73,"User")),t(8),u(" ",l(68,75,"Reset")," "),t(9),c(l(77,77,"UsersList")),t(3),c(l(80,79,"ViewAllSystemUsers")),t(9),u(" ",l(89,81,"Name")," "),t(2),U(d.getSortIcon("first_name")),t(3),u(" ",l(94,83,"Email")," "),t(2),U(d.getSortIcon("email")),t(2),u(" ",l(98,85,"Roles")," "),t(4),u(" ",l(102,87,"Status")," "),t(2),U(d.getSortIcon("is_admin")),t(3),u(" ",l(107,89,"CreatedAt")," "),t(2),U(d.getSortIcon("created_at")),t(2),u(" ",l(111,91,"Actions")," "),t(3),m("ngIf",l(114,93,d.loading$)),t(2),m("ngIf",!l(116,95,d.loading$)&&((I=l(117,97,d.users$))==null?null:I.length)===0),t(3),m("ngForOf",l(119,99,d.users$))("ngForTrackBy",d.trackByUserId),t(2),m("ngIf",!l(121,101,d.loading$)&&l(122,103,d.users$)&&l(123,105,d.users$).length>0)}},dependencies:[P,j,se,pe,ae,oe,le,Ve,T,ce,ue,Ze,et,q,re,z],encapsulation:2})};function pi(i,p){if(i&1){let e=N();n(0,"button",11),h("click",function(){E(e);let d=C();return w(d.goToEdit())}),v(1,"i",12),s(2),a(3,"translate"),r()}i&2&&(t(2),u(" ",l(3,1,"EditUser")," "))}function di(i,p){i&1&&(n(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16)(4,"div",17)(5,"span",18),s(6),a(7,"translate"),r()(),n(8,"p",19),s(9),a(10,"translate"),r()()()()()),i&2&&(t(6),u("",l(7,2,"Loading"),"..."),t(3),c(l(10,4,"LoadingUserDetails")))}function mi(i,p){if(i&1){let e=N();n(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16),v(4,"i",20),n(5,"h5",21),s(6),a(7,"translate"),r(),n(8,"p",22),s(9),a(10,"translate"),r(),n(11,"button",23),h("click",function(){E(e);let d=C();return w(d.goBack())}),v(12,"i",24),s(13),a(14,"translate"),r()()()()()}i&2&&(t(6),c(l(7,3,"UserNotFound")),t(3),c(l(10,5,"UserNotFoundMessage")),t(4),u(" ",l(14,7,"BackToUsers")," "))}function ci(i,p){if(i&1&&(n(0,"div",58)(1,"div",59)(2,"div",60)(3,"div",3)(4,"div",61),v(5,"i",62),r(),n(6,"div")(7,"h6",28),s(8),r(),n(9,"p",49),s(10),r()()(),n(11,"div",63)(12,"small",22),s(13),a(14,"translate"),a(15,"date"),r()()()()()),i&2){let e=p.$implicit;t(8),c(e.name),t(2),c(e.guard_name),t(3),V(" ",l(14,4,"CreatedAt"),": ",R(15,6,e.created_at,"short")," ")}}function ui(i,p){if(i&1&&(n(0,"div",56),f(1,ci,16,9,"div",57),r()),i&2){let e=C(2);t(),m("ngForOf",e.user.roles)}}function vi(i,p){i&1&&(n(0,"div",64),v(1,"i",65),n(2,"p",66),s(3),a(4,"translate"),r()()),i&2&&(t(3),c(l(4,1,"NoRolesAssigned")))}function fi(i,p){if(i&1&&(n(0,"div",13)(1,"div",25)(2,"div",26)(3,"div",27)(4,"h6",28),s(5),a(6,"translate"),r()(),n(7,"div",29)(8,"div",30)(9,"div",31),v(10,"i",32),r(),n(11,"h5",28),s(12),r(),n(13,"span"),s(14),a(15,"translate"),r()(),n(16,"div",33)(17,"span",34),s(18),a(19,"translate"),r(),n(20,"span",35),s(21),r()(),n(22,"div",33)(23,"span",34),s(24),a(25,"translate"),r(),n(26,"span",36),v(27,"i",37),s(28),a(29,"translate"),r()(),n(30,"div",33)(31,"span",34),s(32),a(33,"translate"),r(),n(34,"span",35),s(35),a(36,"translate"),a(37,"translate"),r()(),n(38,"div",38)(39,"span",34),s(40),a(41,"translate"),r(),n(42,"span",35),s(43),a(44,"date"),r()()()()(),n(45,"div",39)(46,"div",26)(47,"div",27)(48,"h6",28),s(49),a(50,"translate"),r()(),n(51,"div",29)(52,"div",13)(53,"div",14)(54,"h6",40),s(55),a(56,"translate"),r(),f(57,ui,2,1,"div",41)(58,vi,5,3,"div",42),r()()()()(),n(59,"div",43)(60,"div",15)(61,"div",27)(62,"h6",28),s(63),a(64,"translate"),r()(),n(65,"div",29)(66,"div",13)(67,"div",44)(68,"div",45)(69,"div",46)(70,"div",47),v(71,"i",48),r(),n(72,"h6",28),s(73),a(74,"date"),r(),n(75,"p",49),s(76),a(77,"translate"),r()()()(),n(78,"div",44)(79,"div",45)(80,"div",46)(81,"div",50),v(82,"i",51),r(),n(83,"h6",28),s(84),a(85,"date"),r(),n(86,"p",49),s(87),a(88,"translate"),r()()()(),n(89,"div",44)(90,"div",45)(91,"div",46)(92,"div",52),v(93,"i",53),r(),n(94,"h6",28),s(95),a(96,"date"),a(97,"translate"),r(),n(98,"p",49),s(99),a(100,"translate"),r()()()(),n(101,"div",44)(102,"div",45)(103,"div",46)(104,"div",54),v(105,"i",55),r(),n(106,"h6",28),s(107),r(),n(108,"p",49),s(109),a(110,"translate"),r()()()()()()()()()),i&2){let e=C();t(5),c(l(6,29,"BasicInformation")),t(7),V("",e.user.first_name," ",e.user.last_name,""),t(),U(e.getStatusClass()),t(),c(l(15,31,e.getStatusLabel())),t(4),u("",l(19,33,"Email"),":"),t(3),c(e.user.email),t(3),u("",l(25,35,"EmailStatus"),":"),t(2),U(e.getVerificationClass()),t(2),u(" ",l(29,37,e.getVerificationStatus())," "),t(4),u("",l(33,39,"UserType"),":"),t(3),u(" ",e.user.is_admin?l(36,41,"Administrator"):l(37,43,"User")," "),t(5),u("",l(41,45,"MemberSince"),":"),t(3),c(R(44,47,e.user.created_at,"mediumDate")),t(6),c(l(50,50,"RolesAndPermissions")),t(6),c(l(56,52,"AssignedRoles")),t(2),m("ngIf",e.user.roles&&e.user.roles.length>0),t(),m("ngIf",!e.user.roles||e.user.roles.length===0),t(5),c(l(64,54,"AccountActivity")),t(10),c(R(74,56,e.user.created_at,"mediumDate")),t(3),c(l(77,59,"AccountCreated")),t(8),c(R(85,61,e.user.updated_at,"mediumDate")),t(3),c(l(88,64,"LastUpdated")),t(8),u(" ",e.user.email_verified_at?R(96,66,e.user.email_verified_at,"mediumDate"):l(97,69,"NotVerified")," "),t(4),c(l(100,71,"EmailVerified")),t(8),c(e.user.roles.length||0),t(2),c(l(110,73,"AssignedRoles"))}}var fe=class i extends T{constructor(e,o,d,_,x){super();this.route=e;this.router=o;this.userService=d;this.modalService=_;this.translateService=x;this.loading$=this.userService.loading$,this.error$=this.userService.error$}destroy$=new $;user=null;loading$;error$;userId=null;ngOnInit(){this.userId=this.route.snapshot.paramMap.get("id"),this.userId&&this.loadUserDetail()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}goToEdit(){let e=this.modalService.open(M,{size:"lg",backdrop:"static",keyboard:!1});e.componentInstance.userToEdit=this.user,e.result.then(()=>{this.loadUserDetail()}).catch(()=>{})}loadUserDetail(){this.userId&&this.userService.getUserDetail(this.userId).pipe(A(this.destroy$)).subscribe(e=>{this.user=e})}goBack(){this.router.navigate(["/admin/users"])}getStatusLabel(){return this.user?this.user.is_admin?"Administrator":"Regular User":""}getStatusClass(){return this.user?this.user.is_admin?"badge bg-gradient-success":"badge bg-gradient-info":""}getVerificationStatus(){return this.user?this.user.email_verified_at?"Verified":"Not Verified":""}getVerificationClass(){return this.user?this.user.email_verified_at?"text-success":"text-warning":""}static \u0275fac=function(o){return new(o||i)(g(G),g(F),g(y),g(me),g(De))};static \u0275cmp=L({type:i,selectors:[["app-detail-user"]],standalone:!1,features:[ie],decls:21,vars:16,consts:[["nameOption","UserDetail"],[1,"row","mb-4"],[1,"col-lg-8","col-md-6","col-12"],[1,"d-flex","align-items-center"],[1,"btn","btn-link","text-dark","p-0","me-3",3,"click"],[1,"fas","fa-arrow-left","fa-lg"],[1,"mb-0","text-dark"],[1,"text-sm","text-secondary","mb-0"],[1,"col-lg-4","col-md-6","col-12","text-end"],["class","btn btn-primary btn-sm mb-0",3,"click",4,"ngIf"],["class","row",4,"ngIf"],[1,"btn","btn-primary","btn-sm","mb-0",3,"click"],[1,"fas","fa-edit","me-2"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body","text-center","py-5"],["role","status",1,"spinner-border","spinner-border-lg","text-primary"],[1,"visually-hidden"],[1,"mt-3","text-secondary"],[1,"fas","fa-user-slash","fa-3x","text-secondary","mb-3"],[1,"text-secondary"],[1,"text-muted"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-arrow-left","me-2"],[1,"col-xl-4","col-lg-5","col-md-6","col-12","mb-4"],[1,"card","h-100"],[1,"card-header","pb-0"],[1,"mb-0"],[1,"card-body"],[1,"text-center","mb-4"],[1,"avatar","avatar-xl","bg-gradient-primary","rounded-circle","mx-auto","mb-3"],[1,"fas","fa-user","fa-2x","text-white"],[1,"d-flex","justify-content-between","border-bottom","py-2"],[1,"text-sm","text-secondary"],[1,"text-sm","font-weight-bold"],[1,"text-sm"],[1,"fas","fa-circle","me-1",2,"font-size","8px"],[1,"d-flex","justify-content-between","py-2"],[1,"col-xl-8","col-lg-7","col-md-6","col-12","mb-4"],[1,"text-sm","text-uppercase","text-secondary","mb-3"],["class","d-flex flex-wrap",4,"ngIf"],["class","text-center py-4",4,"ngIf"],[1,"col-12","mb-4"],[1,"col-lg-3","col-md-6","col-12"],[1,"card","border","mb-3"],[1,"card-body","text-center","p-3"],[1,"avatar","avatar-sm","bg-gradient-primary","rounded-circle","mx-auto","mb-2"],[1,"fas","fa-calendar-plus","text-white"],[1,"text-xs","text-secondary","mb-0"],[1,"avatar","avatar-sm","bg-gradient-info","rounded-circle","mx-auto","mb-2"],[1,"fas","fa-sync","text-white"],[1,"avatar","avatar-sm","bg-gradient-success","rounded-circle","mx-auto","mb-2"],[1,"fas","fa-check-circle","text-white"],[1,"avatar","avatar-sm","bg-gradient-warning","rounded-circle","mx-auto","mb-2"],[1,"fas","fa-shield-alt","text-white"],[1,"d-flex","flex-wrap"],["class","me-3 mb-3",4,"ngFor","ngForOf"],[1,"me-3","mb-3"],[1,"card","border"],[1,"card-body","p-3"],[1,"avatar","avatar-sm","bg-gradient-info","rounded-circle","me-3"],[1,"fas","fa-user-tag","text-white"],[1,"mt-2"],[1,"text-center","py-4"],[1,"fas","fa-user-times","fa-2x","text-secondary","mb-3"],[1,"text-secondary","mb-0"]],template:function(o,d){o&1&&(n(0,"app-base",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),h("click",function(){return d.goBack()}),v(5,"i",5),r(),n(6,"div")(7,"h4",6),s(8),a(9,"translate"),r(),n(10,"p",7),s(11),a(12,"translate"),r()()()(),n(13,"div",8),f(14,pi,4,3,"button",9),r()(),f(15,di,11,6,"div",10),a(16,"async"),f(17,mi,15,9,"div",10),a(18,"async"),f(19,fi,111,75,"div",10),a(20,"async"),r()),o&2&&(t(8),c(l(9,6,"UserDetails")),t(3),c(l(12,8,"ViewUserInformation")),t(3),m("ngIf",d.user),t(),m("ngIf",l(16,10,d.loading$)),t(2),m("ngIf",!l(18,12,d.loading$)&&!d.user),t(2),m("ngIf",!l(20,14,d.loading$)&&d.user))},dependencies:[P,j,T,q,re,z],encapsulation:2})};var _i=[{path:"",component:ve,canActivate:[Se],data:{roles:["SuperAdmin"]}},{path:"detail/:id",component:fe,canActivate:[Se],data:{roles:["SuperAdmin"]}}],_e=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=ee({type:i});static \u0275inj=X({imports:[xe.forChild(_i),xe]})};var mt=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=ee({type:i});static \u0275inj=X({providers:[K,y],imports:[Te,qe,Ge,_e,nt,tt,it,rt,Me.forRoot({loader:{provide:Ne,useFactory:at,deps:[ne]}}),Xe,He]})};export{mt as UsersModule};
